import{j as e,L as b,r as h}from"./index-esxET7c2.js";import{r as a}from"./vendor-D4ShCMrl.js";import{K as w}from"./key-round-CDSd2Kz5.js";import{C as N}from"./circle-alert-D55EbQWU.js";import{C as j}from"./circle-check-big-CXwKRv0P.js";const R=()=>{const[l,u]=a.useState(""),[m,x]=a.useState(""),[g,p]=a.useState(""),[d,y]=a.useState(""),[c,i]=a.useState(!1),[r,o]=a.useState({type:"",text:""}),f=async s=>{if(s.preventDefault(),i(!0),o({type:"",text:""}),l!==d)return i(!1),o({type:"error",text:"New PINs do not match."});if(l.length<4)return i(!1),o({type:"error",text:"PIN must be at least 4 characters long."});try{const t={pin:l},n=await h(token,t);o({type:"success",text:n.data.message||"Your PIN has been successfully reset. You can now log in."}),navigate("/login")}catch(t){console.error("Reset PIN error:",t);let n="An unexpected error occurred. Please try again.";t.response?n=t.response.data.message||`Error: ${t.response.status} ${t.response.statusText}`:t.request&&(n="Network error. Please check your internet connection."),o({type:"error",text:n})}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4 sm:p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 sm:p-10 w-full max-w-lg transition-all duration-300 transform hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"p-4 rounded-full bg-yellow-50 text-yellow-600 mb-4 shadow-md",children:e.jsx(w,{size:40})}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Pin"}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-2 max-w-sm",children:"Enter your new PIN below. Your new pin must be at least 4 digits long."})]}),r.text&&r.type==="error"&&e.jsxs("div",{className:"mt-6 p-4 rounded-lg flex items-center space-x-3 transition-opacity duration-300 ease-in-out bg-red-50 text-red-700 border-l-4 border-red-400",onClick:()=>o({type:"",text:""}),children:[e.jsx(N,{size:20}),e.jsx("p",{className:"text-sm font-medium",children:r.text})]}),r.type!=="error"&&e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"number",className:"block text-sm font-semibold text-gray-700",children:"Phone Number"}),e.jsx("input",{id:"number",type:"number",value:g,onChange:s=>p(s.target.value),required:!0,placeholder:"••••",className:"w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 bg-gray-50 text-gray-800 transition-colors duration-200 ease-in-out"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-semibold text-gray-700",children:"OTP"}),e.jsx("input",{id:"otp",type:"number",value:m,onChange:s=>x(s.target.value),required:!0,placeholder:"••••",className:"w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 bg-gray-50 text-gray-800 transition-colors duration-200 ease-in-out"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"newPin",className:"block text-sm font-semibold text-gray-700",children:"New PIN"}),e.jsx("input",{id:"newPin",type:"password",value:l,onChange:s=>u(s.target.value),required:!0,placeholder:"••••",className:"w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 bg-gray-50 text-gray-800 transition-colors duration-200 ease-in-out"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"confirmPin",className:"block text-sm font-semibold text-gray-700",children:"Confirm New PIN"}),e.jsx("input",{id:"confirmPin",type:"password",value:d,onChange:s=>y(s.target.value),required:!0,placeholder:"••••",className:"w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 bg-gray-50 text-gray-800 transition-colors duration-200 ease-in-out"})]}),e.jsxs("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center space-x-2 px-6 py-3 bg-yellow-600 text-white font-bold rounded-lg shadow-lg hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 disabled:bg-yellow-400 disabled:cursor-not-allowed transition-all duration-200 ease-in-out",children:[c&&e.jsx(b,{className:"animate-spin",size:20}),e.jsx("span",{children:c?"Resetting...":"Reset Pin"})]})]}),r.text&&r.type==="success"&&e.jsxs("div",{className:"mt-6 p-4 rounded-lg flex items-center space-x-3 transition-opacity duration-300 ease-in-out bg-green-50 text-green-700 border-l-4 border-green-400",children:[e.jsx(j,{size:20}),e.jsx("p",{className:"text-sm font-medium",children:r.text})]})]})})};export{R as default};
